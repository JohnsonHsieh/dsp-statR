<!DOCTYPE html>
<html>
<head>
  <title>Statistical Methods with R</title>
  <meta charset="utf-8">
  <meta name="description" content="Statistical Methods with R">
  <meta name="author" content="Johnson Hsieh (謝宗震)">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Statistical Methods with R</h1>
    <h2></h2>
    <p>Johnson Hsieh (謝宗震)<br/>DSP團訓班2</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Links To Slides</h2>
  </hgroup>
  <article data-timings="">
    <h3>Link to all slides</h3>

<p><a href="http://JohnsonHsieh.github.com/dsp-statR">http://JohnsonHsieh.github.com/dsp-statR</a></p>

<h3>Source code on github</h3>

<p><a href="http://github.com/JohnsonHsieh/dsp-statR/">http://github.com/JohnsonHsieh/dsp-statR/</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-2" style="background:;">
  <hgroup>
    <h2>Intro R basic (conti.)</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>基礎教學</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># dat &lt;- read.csv(&quot;http://johnsonhsieh.github.io/dsp-introR/data/hsb.csv&quot;)
dat &lt;- read.csv(&quot;data/hsb.csv&quot;)
str(dat) # show dataset structure
</code></pre>

<pre><code>&#39;data.frame&#39;:   200 obs. of  11 variables:
 $ id     : int  70 121 86 141 172 113 50 11 84 48 ...
 $ sex    : Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 1 2 2 2 2 2 2 2 2 ...
 $ race   : Factor w/ 4 levels &quot;African American&quot;,..: 4 4 4 4 4 4 1 3 4 1 ...
 $ ses    : int  1 2 3 3 2 2 2 2 2 2 ...
 $ schtyp : Factor w/ 2 levels &quot;private&quot;,&quot;public&quot;: 2 2 2 2 2 2 2 2 2 2 ...
 $ prog   : Factor w/ 3 levels &quot;academic&quot;,&quot;general&quot;,..: 2 3 2 3 1 1 2 1 2 1 ...
 $ read   : int  57 68 44 63 47 44 50 34 63 57 ...
 $ write  : int  52 59 33 44 52 52 59 46 57 55 ...
 $ math   : int  41 53 54 47 57 51 42 45 54 52 ...
 $ science: int  47 63 58 53 53 63 53 39 58 50 ...
 $ socst  : int  57 61 31 56 61 61 61 36 51 51 ...
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Homework</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># Q:男女生考試總分的平均成績誰比較高，高多少分
# Hint:
score &lt;- dat[, c(&quot;read&quot;,&quot;write&quot;,&quot;math&quot;,&quot;science&quot;,&quot;socst&quot;)]
mean(dat[dat$sex==&quot;female&quot;, &quot;math&quot;])
mean(dat[dat$sex==&quot;male&quot;, &quot;math&quot;])
sum()
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Homework</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># Q:男女生考試總分的平均成績誰比較高，高多少分
# A1:
score &lt;- dat[, c(&quot;read&quot;,&quot;write&quot;,&quot;math&quot;,&quot;science&quot;,&quot;socst&quot;)]
F &lt;- sum(score[dat$sex==&quot;female&quot;,])/sum(dat$sex==&quot;female&quot;)
M &lt;- sum(score[dat$sex==&quot;male&quot;,])/sum(dat$sex==&quot;male&quot;)
F - M
</code></pre>

<pre><code>[1] 1.82
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Homework</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># Q:男女生考試總分的平均成績誰比較高，高多少分
# A2:
score &lt;- dat[, c(&quot;read&quot;,&quot;write&quot;,&quot;math&quot;,&quot;science&quot;,&quot;socst&quot;)]
total &lt;- score[,1]+score[,2]+score[,3]+score[,4]+score[,5]
F &lt;- mean(total[dat$sex==&quot;female&quot;])
M &lt;- mean(total[dat$sex==&quot;male&quot;])
F - M
</code></pre>

<pre><code>[1] 1.82
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Labeling Categorical Vars</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">?factor
race &lt;- factor(dat$race, 
               levels = c(&quot;Hispanic&quot;, &quot;Asian&quot;, &quot;African American&quot;, &quot;White&quot;), 
               labels = c(&quot;HI&quot;, &quot;AS&quot;, &quot;AA&quot;, &quot;WH&quot;))
head(race, n=10)
</code></pre>

<pre><code> [1] WH WH WH WH WH WH AA HI WH AA
Levels: HI AS AA WH
</code></pre>

<pre><code class="r">race2 &lt;- factor(dat$race, 
               levels = c(&quot;African American&quot;, &quot;White&quot;), 
               labels = c(&quot;B&quot;, &quot;W&quot;))
head(race2, n=10)
</code></pre>

<pre><code> [1] W    W    W    W    W    W    B    &lt;NA&gt; W    B   
Levels: B W
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Sorting Data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">dat &lt;- dat[order(dat$id, dat$sex), ] # sort data by id and sex
head(dat)
</code></pre>

<pre><code>    id    sex     race ses schtyp       prog read write math science socst
99   1 female Hispanic   1 public vocational   34    44   40      39    41
139  2 female Hispanic   2 public vocational   39    41   33      42    41
84   3   male Hispanic   1 public   academic   63    65   48      63    56
112  4 female Hispanic   1 public   academic   44    50   41      39    51
76   5   male Hispanic   1 public   academic   47    40   43      45    31
149  6 female Hispanic   1 public   academic   47    41   46      40    41
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>Merging Data</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Use rbind or cbind</li>
</ul>

<pre><code class="r">dat$score &lt;- rowSums(dat[,7:11]) # read + write + math + science + socst
# rowSums, colSums, rowMeans, colMeans
str(dat$score)
</code></pre>

<pre><code> num [1:200] 198 196 295 225 206 215 268 227 244 264 ...
</code></pre>

<pre><code class="r">dat.female &lt;- dat[dat$sex==&quot;female&quot;,]
dat.male &lt;- dat[dat$sex==&quot;male&quot;,]
dat.both &lt;- rbind(dat.female, dat.male)
cbind(dim(dat.female), dim(dat.male),dim(dat.both))
</code></pre>

<pre><code>     [,1] [,2] [,3]
[1,]  109   91  200
[2,]   12   12   12
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-10" style="background:;">
  <hgroup>
    <h2>台北市實價登錄資料</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Read data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">f &lt;- file(&quot;data/dsp-gift-2013-big5/買賣st_A_10109_10109.csv&quot;, encoding=&quot;big5&quot;)
tab &lt;- read.csv(f)
names(tab)
</code></pre>

<pre><code> [1] &quot;鄉鎮市區&quot;                  &quot;交易標的&quot;                  &quot;土地區段位置.建物區段門牌&quot;
 [4] &quot;土地移轉總面積.平方公尺.&quot;  &quot;使用分區或編定&quot;            &quot;非都市土地使用分區&quot;       
 [7] &quot;非都市土地使用地&quot;          &quot;交易年月&quot;                  &quot;交易筆棟數&quot;               
[10] &quot;移轉層次&quot;                  &quot;總樓層數&quot;                  &quot;建物型態&quot;                 
[13] &quot;主要用途&quot;                  &quot;主要建材&quot;                  &quot;建築完成年月&quot;             
[16] &quot;建物移轉總面積.平方公尺.&quot;  &quot;建物現況格局.房&quot;           &quot;建物現況格局.廳&quot;          
[19] &quot;建物現況格局.衛&quot;           &quot;建物現況格局.隔間&quot;         &quot;有無管理組織&quot;             
[22] &quot;總價.元.&quot;                  &quot;單價.元.平方公尺.&quot;         &quot;車位類別&quot;                 
[25] &quot;車位移轉總面積.平方公尺.&quot;  &quot;車位總價.元.&quot;              &quot;交易標的橫坐標&quot;           
[28] &quot;交易標的縱坐標&quot;           
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>台北市實價登錄資料</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">str(tab)
</code></pre>

<pre><code>&#39;data.frame&#39;:   1789 obs. of  28 variables:
 $ 鄉鎮市區                 : Factor w/ 12 levels &quot;北投區&quot;,&quot;大安區&quot;,..: 12 8 3 5 11 5 5 5 5 5 ...
 $ 交易標的                 : Factor w/ 5 levels &quot;車位&quot;,&quot;房地(土地+建物)&quot;,..: 2 2 1 2 2 3 2 2 2 2 ...
 $ 土地區段位置.建物區段門牌: Factor w/ 1216 levels &quot;?和段一小段251~300地號&quot;,..: 1146 711 305 409 1038 471 411 522 472 455 ...
 $ 土地移轉總面積.平方公尺. : Factor w/ 1358 levels &quot;0&quot;,&quot;0.04&quot;,&quot;0.05&quot;,..: 445 388 39 1243 53 250 889 424 84 928 ...
 $ 使用分區或編定           : Factor w/ 6 levels &quot;&quot;,&quot;工&quot;,&quot;農&quot;,&quot;其他&quot;,..: 6 6 5 2 5 4 6 4 6 5 ...
 $ 非都市土地使用分區       : Factor w/ 2 levels &quot;&quot;,&quot;住宅區&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ 非都市土地使用地         : logi  NA NA NA NA NA NA ...
 $ 交易年月                 : int  10107 10108 10107 10108 10108 10108 10108 10108 10107 10107 ...
 $ 交易筆棟數               : Factor w/ 73 levels &quot;土地0建物0車位1&quot;,..: 35 12 1 12 35 12 18 12 12 12 ...
 $ 移轉層次                 : Factor w/ 83 levels &quot;&quot;,&quot;八層&quot;,&quot;八層，電梯樓梯間&quot;,..: 40 64 1 2 30 46 40 46 5 27 ...
 $ 總樓層數                 : int  7 5 NA 13 12 14 5 13 7 12 ...
 $ 建物型態                 : Factor w/ 9 levels &quot;辦公商業大樓&quot;,..: 5 4 6 1 9 9 4 9 5 9 ...
 $ 主要用途                 : Factor w/ 9 levels &quot;&quot;,&quot;工業用&quot;,&quot;國民住宅&quot;,..: 8 8 1 4 6 6 8 8 8 8 ...
 $ 主要建材                 : Factor w/ 10 levels &quot;&quot;,&quot;鋼骨鋼筋混凝土造&quot;,..: 4 4 1 4 4 4 4 4 4 4 ...
 $ 建築完成年月             : int  NA NA NA 980729 780816 971205 770303 880121 730628 960621 ...
 $ 建物移轉總面積.平方公尺. : Factor w/ 1458 levels &quot;0&quot;,&quot;1,368.1&quot;,..: 104 1249 873 906 1218 15 148 1389 940 969 ...
 $ 建物現況格局.房          : int  3 2 0 0 2 2 3 4 2 0 ...
 $ 建物現況格局.廳          : int  2 2 0 1 1 1 2 2 1 1 ...
 $ 建物現況格局.衛          : int  2 2 0 1 1 1 2 2 1 1 ...
 $ 建物現況格局.隔間        : Factor w/ 2 levels &quot;無&quot;,&quot;有&quot;: 2 2 2 2 2 2 2 2 2 2 ...
 $ 有無管理組織             : Factor w/ 2 levels &quot;無&quot;,&quot;有&quot;: 1 1 2 2 2 2 2 2 1 2 ...
 $ 總價.元.                 : num  12800000 8500000 2500000 7180000 13500000 ...
 $ 單價.元.平方公尺.        : int  115094 107472 NA 164093 177335 153819 119420 216516 152771 167742 ...
 $ 車位類別                 : Factor w/ 8 levels &quot;&quot;,&quot;坡道機械&quot;,..: 1 1 6 1 1 2 1 1 1 1 ...
 $ 車位移轉總面積.平方公尺. : num  0 0 41.2 0 0 ...
 $ 車位總價.元.             : int  0 0 2500000 0 0 0 0 0 0 0 ...
 $ 交易標的橫坐標           : int  301899 300232 302457 306708 302639 309249 312050 310272 308604 309514 ...
 $ 交易標的縱坐標           : int  2768591 2769876 2771743 2775061 2771658 2772745 2773989 2774704 2774980 2773492 ...
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Modifying and Managing Data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tab1 &lt;- tab # 整理資料
tab1$行政區 &lt;- tab1$鄉鎮市區
tab1$車位 &lt;- factor(tab1$交易標的, levels=c(&quot;房地(土地+建物)&quot;, &quot;房地(土地+建物)+車位&quot;),
                    labels=c(&quot;無&quot;, &quot;有&quot;))
tab1$型態 &lt;- factor(tab1$建物型態, levels=c(&quot;公寓(5樓含以下無電梯)&quot;,&quot;華廈(10層含以下有電梯)&quot;,
                    &quot;住宅大樓(11層含以上有電梯)&quot;), labels=c(&quot;公寓&quot;,&quot;華廈&quot;,&quot;大樓&quot;))
tab1$房價 &lt;- (tab1$總價.元 - tab1$車位總價.元.)
?sub 
tab1$建物移轉總面積.平方公尺. &lt;- as.numeric(sub(&quot;\\,&quot;, &quot;&quot;,
                                          as.character(tab1$建物移轉總面積.平方公尺.)))
tab1$面積 &lt;- 0.3025*(tab1$建物移轉總面積.平方公尺. - tab1$車位移轉總面積.平方公尺.)
tab1$管理 &lt;- tab1$有無管理組織
tab1$屋齡 &lt;- 103 - tab1$建築完成年月%/%10000
tab1 &lt;- tab1[, c(&quot;行政區&quot;,&quot;型態&quot;,&quot;房價&quot;,&quot;面積&quot;,&quot;屋齡&quot;,&quot;車位&quot;,&quot;管理&quot;)]
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Modifying and Managing Data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">head(tab1)
</code></pre>

<pre><code>  行政區 型態     房價 面積 屋齡 車位 管理
1 中正區 華廈 12800000 33.6   NA   無   無
2 萬華區 公寓  8500000 23.9   NA   無   無
3 大同區 &lt;NA&gt;        0  0.0   NA &lt;NA&gt;   有
4 內湖區 &lt;NA&gt;  7180000 13.2    5   無   有
5 中山區 大樓 13500000 23.0   25   無   有
6 內湖區 大樓 15500000 25.5    6   有   有
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Modifying and Managing Data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">summary(tab1)
</code></pre>

<pre><code>     行政區      型態          房價               面積           屋齡       車位     管理     
 中山區 :265   公寓:364   Min.   :0.00e+00   Min.   : -16   Min.   : 2    無  :999   無: 785  
 北投區 :261   華廈:321   1st Qu.:7.90e+06   1st Qu.:  14   1st Qu.: 5    有  :560   有:1004  
 內湖區 :237   大樓:621   Median :1.42e+07   Median :  28   Median :16    NA&#39;s:230            
 文山區 :152   NA&#39;s:483   Mean   :2.92e+07   Mean   :  40   Mean   :18                        
 大安區 :149              3rd Qu.:2.51e+07   3rd Qu.:  45   3rd Qu.:30                        
 中正區 :129              Max.   :6.70e+09   Max.   :4430   Max.   :52                        
 (Other):596                                                NA&#39;s   :357                       
</code></pre>

<pre><code class="r">tab1 &lt;- na.omit(tab1)
tab1 &lt;- tab1[tab1$房價!=0,]
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-16" style="background:;">
  <hgroup>
    <h2>Exploratory Data Analysis</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Tabulating Data</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">?table
table(tab1[,1])
</code></pre>

<pre><code>
北投區 大安區 大同區 南港區 內湖區 士林區 松山區 萬華區 文山區 信義區 中山區 中正區 
   186     73     34     56    181     66     61     75    109     51    161     85 
</code></pre>

<pre><code class="r">table(tab1[,2])
</code></pre>

<pre><code>
公寓 華廈 大樓 
 249  302  587 
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Pivot tables</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># install.packages(&quot;reshape&quot;)
library(reshape)
?cast
cast(tab1, 型態 ~ ., fun.aggregate=mean, value=&quot;房價&quot;)
</code></pre>

<pre><code>  型態    (all)
1 公寓 13628028
2 華廈 18699187
3 大樓 28207161
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Pivot tables</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">cast(tab1, 行政區 ~ ., fun.aggregate=table, value=&quot;型態&quot;)
</code></pre>

<pre><code>   行政區 公寓 華廈 大樓
1  北投區   37   33  116
2  大安區    9   34   30
3  大同區    7    6   21
4  南港區    9   23   24
5  內湖區   57   48   76
6  士林區   28   24   14
7  松山區   10   19   32
8  萬華區   15   13   47
9  文山區   30   31   48
10 信義區   21    6   24
11 中山區   21   51   89
12 中正區    5   14   66
</code></pre>

<pre><code class="r"># cast(tab1, 行政區 ~ 管理, fun.aggregate=table, value=&quot;型態&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>小挑戰</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>請計算台北市各行政區為的平均房價</li>
<li>請計算台北市各行政區各種建物型態的房價中位數</li>
<li>Hint: use cast() function in reshape package, 中位數函數 median()</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Bar Chart and Pie Chart</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Ref: <a href="http://www.statmethods.net/graphs/">http://www.statmethods.net/graphs/</a>, Quick-R</li>
</ul>

<pre><code class="r">par(family=&quot;STHeiti&quot;, mfrow=c(1,2)) # Mac 中文字型設定
barplot(sort(table(tab1$行政區), decreasing=TRUE), las=2)
pie(sort(table(tab1$型態), decreasing=TRUE))
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-16.png" title="plot of chunk unnamed-chunk-16" alt="plot of chunk unnamed-chunk-16" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Histogram and denstiy</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><a href="http://www.stat.columbia.edu/%7Etzheng/files/Rcolor.pdf">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a>, colors in R</li>
</ul>

<pre><code class="r">par(family=&quot;STHeiti&quot;, mfrow=c(1,2)) # Mac 中文字型設定
hist(tab1$面積)
hist(tab1$面積, breaks=10, col=&quot;lightblue&quot;, prob=TRUE, xlab=&quot;面積&quot;, main=&quot;Histogram&quot;)
lines(density(tab1$面積, bw=8), col=2, lwd=2)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-17.png" title="plot of chunk unnamed-chunk-17" alt="plot of chunk unnamed-chunk-17" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>小挑戰</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>?hist, ?density</li>
<li>改變 hist() 函數中的breaks參數，觀察直方圖的變化</li>
<li>改變 density() 函數中的bw參數，觀察機率密度函數的變化</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <article data-timings="">
    <pre><code class="r">par(family=&quot;STHeiti&quot;, mfrow=c(2,2)) # Mac 中文字型設定
hist(tab1$房價, col=&quot;gray&quot;)
hist(tab1$面積, col=&quot;gold&quot;)
hist(log10(tab1$房價), col=&quot;darkgreen&quot;)
hist(log10(tab1$面積), col=&quot;lightgreen&quot;)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-18.png" title="plot of chunk unnamed-chunk-18" alt="plot of chunk unnamed-chunk-18" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>Scatterplot</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">par(family=&quot;STHeiti&quot;, mfrow=c(1,2)) # Mac 中文字型設定
plot(tab1$房價/10^4, tab1$面積, xlab=&quot;房價(萬元)&quot;, ylab=&quot;面積(坪)&quot;)
plot(tab1$房價/10^4, tab1$面積, xlab=&quot;log房價(萬元)&quot;, ylab=&quot;log面積(坪)&quot;, log=&quot;xy&quot;)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-19.png" title="plot of chunk unnamed-chunk-19" alt="plot of chunk unnamed-chunk-19" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-26" style="background:;">
  <hgroup>
    <h2>Line chart</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">attach(beaver1)
hours &lt;- time %/% 100 + 24*(day - day[1]) + (time %% 100)/60
plot(hours, temp, type=&quot;l&quot;, main=&quot;Body Temperature Series&quot;)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-20.png" title="plot of chunk unnamed-chunk-20" alt="plot of chunk unnamed-chunk-20" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Correlation</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">x &lt;- tab1$房價/10^4
y &lt;- tab1$面積
cor(x, y)
</code></pre>

<pre><code>[1] 0.816
</code></pre>

<pre><code class="r">cor(log10(x), log10(y))
</code></pre>

<pre><code>[1] 0.874
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Regression</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">par(family=&quot;STHeiti&quot;) # Mac 中文字型設定
plot(x, y, xlab=&quot;房價(萬元)&quot;, ylab=&quot;面積(坪)&quot;, log=&quot;xy&quot;)
fit &lt;- lm(log10(y) ~ log10(x)) # log10.y = -0.85 + 0.73 * log10.x
abline(fit, col=2, lwd=2)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-22.png" title="plot of chunk unnamed-chunk-22" alt="plot of chunk unnamed-chunk-22" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-29" style="background:;">
  <article data-timings="">
    <pre><code class="r">summary(fit) 
</code></pre>

<pre><code>
Call:
lm(formula = log10(y) ~ log10(x))

Residuals:
    Min      1Q  Median      3Q     Max 
-0.4976 -0.0773  0.0039  0.0869  0.5527 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  -0.8480     0.0393   -21.6   &lt;2e-16 ***
log10(x)      0.7321     0.0121    60.5   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.128 on 1136 degrees of freedom
Multiple R-squared:  0.763, Adjusted R-squared:  0.763 
F-statistic: 3.67e+03 on 1 and 1136 DF,  p-value: &lt;2e-16
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-30" style="background:;">
  <hgroup>
    <h2>Prediction</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">new &lt;- data.frame(x = c(500, 800, 1600, 2500, 5000, 8000))
10^predict(fit, newdata=new)
</code></pre>

<pre><code>    1     2     3     4     5     6 
 13.4  18.9  31.4  43.6  72.4 102.2 
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Multiple Regression</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">fit1 &lt;- lm(log10(面積)~log10(房價/10^4),data=tab1)
fit2 &lt;- lm(log10(面積)~log10(房價/10^4)+型態+車位+管理,data=tab1)
fit2
</code></pre>

<pre><code>
Call:
lm(formula = log10(面積) ~ log10(房價/10^4) + 型態 + 車位 + 
    管理, data = tab1)

Coefficients:
     (Intercept)  log10(房價/10^4)          型態華廈          型態大樓            車位有  
         -0.6311            0.6762           -0.0734           -0.0631            0.0888  
          管理有  
         -0.0329  
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-32" style="background:;">
  <article data-timings="">
    <pre><code class="r">summary(fit1)
</code></pre>

<pre><code>
Call:
lm(formula = log10(面積) ~ log10(房價/10^4), data = tab1)

Residuals:
    Min      1Q  Median      3Q     Max 
-0.4976 -0.0773  0.0039  0.0869  0.5527 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       -0.8480     0.0393   -21.6   &lt;2e-16 ***
log10(房價/10^4)   0.7321     0.0121    60.5   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.128 on 1136 degrees of freedom
Multiple R-squared:  0.763, Adjusted R-squared:  0.763 
F-statistic: 3.67e+03 on 1 and 1136 DF,  p-value: &lt;2e-16
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-33" style="background:;">
  <article data-timings="">
    <pre><code class="r">summary(fit2)
</code></pre>

<pre><code>
Call:
lm(formula = log10(面積) ~ log10(房價/10^4) + 型態 + 車位 + 
    管理, data = tab1)

Residuals:
    Min      1Q  Median      3Q     Max 
-0.4461 -0.0697  0.0056  0.0817  0.5461 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      -0.63109    0.04382  -14.40  &lt; 2e-16 ***
log10(房價/10^4)  0.67619    0.01396   48.43  &lt; 2e-16 ***
型態華廈         -0.07343    0.01198   -6.13  1.2e-09 ***
型態大樓         -0.06315    0.01243   -5.08  4.4e-07 ***
車位有            0.08883    0.00943    9.42  &lt; 2e-16 ***
管理有           -0.03286    0.00960   -3.42  0.00064 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.12 on 1132 degrees of freedom
Multiple R-squared:  0.79,  Adjusted R-squared:  0.789 
F-statistic:  853 on 5 and 1132 DF,  p-value: &lt;2e-16
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-34" style="background:;">
  <article data-timings="">
    <pre><code class="r">anova(fit1, fit2)
</code></pre>

<pre><code>Analysis of Variance Table

Model 1: log10(面積) ~ log10(房價/10^4)
Model 2: log10(面積) ~ log10(房價/10^4) + 型態 + 車位 + 管理
  Res.Df  RSS Df Sum of Sq    F Pr(&gt;F)    
1   1136 18.5                             
2   1132 16.4  4       2.1 36.2 &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-35" style="background:;">
  <article data-timings="">
    <pre><code class="r">par(family=&quot;STHeiti&quot;) # Mac 中文字型設定
cols &lt;- adjustcolor(ifelse(tab1$型態==&quot;公寓&quot;, 2, 4), 0.3)
plot(面積 ~ 房價, data=tab1,  col = cols, pch=19, log=&quot;xy&quot;)
legend(&quot;topleft&quot;, c(&quot;公寓&quot;, &quot;華廈+大樓&quot;), pch=19, col=c(2,4), bty=&quot;n&quot;)
</code></pre>

<div class="rimage center"><img src="figure/unnamed-chunk-29.png" title="plot of chunk unnamed-chunk-29" alt="plot of chunk unnamed-chunk-29" class="plot" /></div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>References</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><a href="http://www.ats.ucla.edu/stat/r/seminars/intro.htm">Introducing R</a>, UCLA R seminars</li>
<li><a href="http://rpubs.com/wush978/R_DataType">R的資料型態</a>, TW R User Group</li>
<li><a href="http://www.statmethods.net/graphs/">Quick R graphs</a>, Quick R</li>
<li><a href="http://ccckmit.wikidot.com/r:main">免費電子書 -- R 統計軟體</a>, 陳鍾誠的網站</li>
<li><a href="http://stackoverflow.com/">StackOverflow</a>, getting help online</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Links To Slides'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Intro R basic (conti.)'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='基礎教學'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Homework'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Homework'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Homework'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Labeling Categorical Vars'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Sorting Data'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Merging Data'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='台北市實價登錄資料'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Read data'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='台北市實價登錄資料'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Modifying and Managing Data'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Modifying and Managing Data'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Modifying and Managing Data'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Exploratory Data Analysis'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Tabulating Data'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Pivot tables'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Pivot tables'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='小挑戰'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Bar Chart and Pie Chart'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Histogram and denstiy'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='小挑戰'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title=''>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Scatterplot'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='Line chart'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Correlation'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Regression'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title=''>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Prediction'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Multiple Regression'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title=''>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title=''>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title=''>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title=''>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='References'>
         36
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>

  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>